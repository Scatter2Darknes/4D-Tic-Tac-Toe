:root{
  --bg:#0f1116; --panel:#161922; --line:#2c3240; --muted:#9aa3ad; --text:#e9eef5;
  --x:#6cc1ff; --o:#ff8aa1; --accent:#82ffa2; --win:#82ffa2;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:radial-gradient(1100px 700px at 50% -10%, #1b1f27, var(--bg));
  color:var(--text); font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  display:grid; place-items:center; padding:1rem;
}
.wrap{ width:min(1200px, 95vw); display:grid; gap:0.9rem }
h1{ margin:0; font-size:1.1rem; color:var(--muted) }

.status{
  padding:.5rem .75rem; border:1px solid var(--line); border-radius:12px; background:#0f1218;
}
.status.x{ color:var(--x) }
.status.o{ color:var(--o) }

.legend{ display:flex; gap:1rem; align-items:center; justify-content:space-between; color:var(--muted) }
.reset{
  padding:.5rem .8rem; border-radius:10px; border:1px solid var(--line);
  background:#10131a; color:var(--text); cursor:pointer;
}
.reset:hover{ background:#141926; border-color:#3a4152 }

.space{
  display:grid;
  grid-template-rows: repeat(3, auto);     /* w rows */
  gap: 0.9rem;
}

/* each w-row contains 3 z-boards side-by-side */
.w-row{
  display:grid;
  grid-template-columns: repeat(3, auto);
  gap: 0.9rem;
}

/* each z-board: a 3Ã—3 grid of cells */
.board{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:12px;
  padding:0.6rem;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:0.6rem;
}

/* cells are buttons for accessibility/touch */
.cell{
  appearance:none;
  border:1px solid var(--line);
  border-radius:10px;
  background:#0e1118;
  color:var(--text);
  font-weight:800;
  font-size:clamp(18px, 3.3vw, 28px);
  min-width:52px; min-height:52px; /* decent touch target */
  display:grid; place-items:center;
  cursor:pointer;
  transition: transform .05s ease, background .15s ease, border-color .15s ease;
}
.cell:hover{ background:#121622; border-color:#3a4152 }
.cell:active{ transform:scale(.98) }
.cell:focus-visible{ outline:2px solid var(--accent); outline-offset:2px }

.cell.x{ color:var(--x) }
.cell.o{ color:var(--o) }

/* winning highlight */
.cell.win{
  background:rgba(130,255,162,0.16);
  border-color:var(--win);
  box-shadow:0 0 0 2px var(--win) inset, 0 6px 18px rgba(0,0,0,.35);
  transform:scale(1.02);
}

/* compact labels for w/z (optional) */
.board::before{
  content: attr(data-label);
  color:var(--muted);
  font: 12px/1 system-ui;
  margin-bottom: -0.2rem;
  grid-column: 1 / -1;
}

/* --- Turn theming -------------------------------------------------------- */
:root { --turn: #6cc1ff; }            /* default */
body.theme-x { --turn: var(--x); }
body.theme-o { --turn: var(--o); }

/* Status bar pops with a pulsing dot in the current color */
.status {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: .55rem;
}
.status::before {
  content: "";
  width: 10px; height: 10px;
  border-radius: 50%;
  background: var(--turn);
  box-shadow: 0 0 0 0 rgba(0,0,0,0);
  animation: pulse 1.4s ease-in-out infinite;
}
@keyframes pulse {
  0%   { box-shadow: 0 0 0 0    color-mix(in oklab, var(--turn) 40%, transparent); }
  70%  { box-shadow: 0 0 0 12px color-mix(in oklab, var(--turn) 0%, transparent); }
  100% { box-shadow: 0 0 0 0    color-mix(in oklab, var(--turn) 0%, transparent); }
}

/* Whole 81-cell area glows by turn */
.space {
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--turn) 35%, transparent);
  border-radius: 14px;
  padding: 6px;                /* keep existing spacing looking nice */
}

/* Hover cues in the active color (only on empty cells) */
.cell:not(.x):not(.o):hover {
  border-color: var(--turn);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--turn) 25%, transparent) inset;
}
.cell:not(.x):not(.o):focus-visible {
  outline-color: var(--turn);
}

/* Optional: subtle per-board header tint to match the turn */
.board::before {
  color: color-mix(in oklab, var(--turn) 55%, var(--muted));
}
